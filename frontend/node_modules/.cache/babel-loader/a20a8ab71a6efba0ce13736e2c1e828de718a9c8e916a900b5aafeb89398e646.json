{"ast":null,"code":"import _objectSpread from\"D:/pipeline_v2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{Box,Grid,Typography,CircularProgress,FormControl,InputLabel,Select,MenuItem,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Card,CardContent,Tabs,Tab,Chip,IconButton,Tooltip,Skeleton,Fade,useTheme,alpha,LinearProgress}from\"@mui/material\";import{PieChart,Pie,Cell,Tooltip as RechartsTooltip,Legend,BarChart,Bar,XAxis,YAxis,ResponsiveContainer,LineChart,Line,CartesianGrid,ComposedChart,Area,AreaChart}from\"recharts\";import{AttachMoney as AttachMoneyIcon,ShowChart as ShowChartIcon,MonetizationOn as MonetizationOnIcon,Savings as SavingsIcon,TrendingUp as TrendingUpIcon,Assessment as AssessmentIcon,ErrorOutline as ErrorIcon,CheckCircleOutline as CheckIcon,FilterList as FilterIcon,Refresh as RefreshIcon}from'@mui/icons-material';import{BACKEND_URL}from\"../utils/backend\";import PenaltyTable from\"./PenaltyTable\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const COLORS=[\"#00e6e6\",\"#ff2e9a\",\"#00bcd4\",\"#1976d2\",\"#43a047\",\"#fbc02d\",\"#9c27b0\",\"#ff5722\"];// Custom animated counter component\nconst AnimatedCounter=_ref=>{let{value,duration=1000}=_ref;const[count,setCount]=useState(0);useEffect(()=>{let start=0;const end=parseInt(value);if(start===end)return;const timer=setInterval(()=>{start+=Math.ceil(end/(duration/16));if(start>=end){setCount(end);clearInterval(timer);}else{setCount(start);}},16);return()=>clearInterval(timer);},[value,duration]);return/*#__PURE__*/_jsx(\"span\",{children:count.toLocaleString()});};// Enhanced KPI Card component\nconst KPICard=_ref2=>{let{title,value,subtitle,icon:Icon,color,trend,isLoading}=_ref2;const theme=useTheme();if(isLoading){return/*#__PURE__*/_jsx(Card,{sx:{background:'linear-gradient(145deg, rgba(35, 39, 51, 0.8) 0%, rgba(25, 28, 36, 0.9) 100%)',backdropFilter:'blur(20px)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'16px',boxShadow:'0 8px 32px rgba(0, 0, 0, 0.37)',height:'140px'},children:/*#__PURE__*/_jsxs(CardContent,{sx:{p:3},children:[/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:\"60%\",height:20}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:\"40%\",height:40,sx:{mt:1}}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:\"80%\",height:16,sx:{mt:1}})]})});}return/*#__PURE__*/_jsx(Fade,{in:true,timeout:500,children:/*#__PURE__*/_jsx(Card,{sx:{background:'linear-gradient(145deg, rgba(35, 39, 51, 0.8) 0%, rgba(25, 28, 36, 0.9) 100%)',backdropFilter:'blur(20px)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'16px',boxShadow:'0 8px 32px rgba(0, 0, 0, 0.37)',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',height:'140px',position:'relative',overflow:'hidden','&:hover':{transform:'translateY(-4px)',boxShadow:'0 20px 40px rgba(0, 0, 0, 0.4)',border:\"1px solid \".concat(alpha(color,0.5))},'&::before':{content:'\"\"',position:'absolute',top:0,left:0,right:0,height:'3px',background:\"linear-gradient(90deg, \".concat(color,\", \").concat(alpha(color,0.6),\")\")}},children:/*#__PURE__*/_jsxs(CardContent,{sx:{p:3,position:'relative'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'flex-start',justifyContent:'space-between',mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{color:'#b0bec5',fontWeight:600,fontSize:'0.85rem',textTransform:'uppercase',letterSpacing:'0.5px'},children:title}),/*#__PURE__*/_jsx(Box,{sx:{backgroundColor:alpha(color,0.15),borderRadius:'12px',p:1,display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(Icon,{sx:{color,fontSize:20}})})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",sx:{color:color,fontWeight:700,fontSize:'2rem',lineHeight:1.2,mb:1},children:[/*#__PURE__*/_jsx(AnimatedCounter,{value:typeof value==='string'?value.replace(/[^0-9.]/g,''):value}),typeof value==='string'&&value.includes('%')&&'%']}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{color:'#78909c',fontSize:'0.75rem',lineHeight:1.3},children:subtitle}),trend&&/*#__PURE__*/_jsx(Chip,{size:\"small\",icon:/*#__PURE__*/_jsx(TrendingUpIcon,{sx:{fontSize:14}}),label:trend,sx:{backgroundColor:alpha('#4caf50',0.15),color:'#4caf50',fontSize:'0.7rem',height:20,'& .MuiChip-icon':{color:'#4caf50',fontSize:12}}})]})]})})});};// Enhanced Chart Card component\nconst ChartCard=_ref3=>{let{title,children,isLoading,actions}=_ref3;if(isLoading){return/*#__PURE__*/_jsx(Card,{sx:{background:'linear-gradient(145deg, rgba(35, 39, 51, 0.8) 0%, rgba(25, 28, 36, 0.9) 100%)',backdropFilter:'blur(20px)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'16px',boxShadow:'0 8px 32px rgba(0, 0, 0, 0.37)',height:'420px'},children:/*#__PURE__*/_jsxs(CardContent,{sx:{p:3},children:[/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:\"60%\",height:28}),/*#__PURE__*/_jsx(Skeleton,{variant:\"rectangular\",width:\"100%\",height:350,sx:{mt:2,borderRadius:2}})]})});}return/*#__PURE__*/_jsx(Fade,{in:true,timeout:700,children:/*#__PURE__*/_jsx(Card,{sx:{background:'linear-gradient(145deg, rgba(35, 39, 51, 0.8) 0%, rgba(25, 28, 36, 0.9) 100%)',backdropFilter:'blur(20px)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'16px',boxShadow:'0 8px 32px rgba(0, 0, 0, 0.37)',transition:'all 0.3s ease','&:hover':{boxShadow:'0 12px 40px rgba(0, 0, 0, 0.5)'}},children:/*#__PURE__*/_jsxs(CardContent,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'space-between',mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{color:'#00e6e6',fontWeight:600,fontSize:'1.25rem'},children:title}),actions&&/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:1},children:actions})]}),children]})})});};function ValidationKPIs(_ref4){let{refresh}=_ref4;const[validationData,setValidationData]=useState([]);const[reasonsData,setReasonsData]=useState([]);const[penaltyMetrics,setPenaltyMetrics]=useState(null);const[loading,setLoading]=useState(true);const[selectedPO,setSelectedPO]=useState(\"\");const[tabValue,setTabValue]=useState(0);const theme=useTheme();const handleTabChange=(event,newValue)=>{setTabValue(newValue);};// Helper function to parse CSV\nconst parseCSV=csv=>{const[header,...rows]=csv.trim().split(/\\r?\\n/);const keys=header.split(\",\");return rows.map(row=>{const values=row.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/).map(v=>v.replace(/^\"|\"$/g,\"\"));const obj={};keys.forEach((k,i)=>obj[k]=values[i]);return obj;});};useEffect(()=>{async function fetchData(){setLoading(true);try{// Fetch validation results\nconst validationRes=await fetch(\"\".concat(BACKEND_URL,\"/results/final_reason_validation_results.csv\"));const validationText=await validationRes.text();// Try to fetch from the new endpoint first\nlet reasonsParsed=[];try{const allPenaltiesRes=await fetch(\"\".concat(BACKEND_URL,\"/all-penalties\"));if(allPenaltiesRes.ok){const allPenaltiesData=await allPenaltiesRes.json();reasonsParsed=allPenaltiesData.penalties;}else{// Fallback to direct CSV file\nconst reasonsRes=await fetch(\"\".concat(BACKEND_URL,\"/results/reasons.csv\"));const reasonsText=await reasonsRes.text();reasonsParsed=parseCSV(reasonsText);}}catch(error){console.error(\"Error fetching penalties:\",error);const reasonsRes=await fetch(\"\".concat(BACKEND_URL,\"/results/reasons.csv\"));const reasonsText=await reasonsRes.text();reasonsParsed=parseCSV(reasonsText);}// Parse validation data\nconst validationParsed=parseCSV(validationText);// Make sure penalty values are treated as numbers\nconst reasonsWithNumberPenalty=reasonsParsed.map(row=>_objectSpread(_objectSpread({},row),{},{penalty:row.penalty?parseFloat(row.penalty):0,reason_normalized:row.reason?row.reason.trim().toLowerCase():''}));// Enhance validation data with normalized stated_reason\nconst enhancedValidationData=validationParsed.map(row=>_objectSpread(_objectSpread({},row),{},{stated_reason_normalized:row.stated_reason?row.stated_reason.trim().toLowerCase():''}));setValidationData(enhancedValidationData);setReasonsData(reasonsWithNumberPenalty);// Fetch penalty metrics\nconst penaltyRes=await fetch(\"\".concat(BACKEND_URL,\"/calculate-penalties\"),{method:'POST',headers:{'Content-Type':'application/json'}});const penaltyData=await penaltyRes.json();if(penaltyData.status==='success'){setPenaltyMetrics(penaltyData.metrics);}}catch(error){console.error(\"Error fetching data:\",error);}finally{setLoading(false);}}fetchData();},[refresh]);// Calculate metrics only after data is loaded\nconst metrics=React.useMemo(()=>{if(!validationData.length){return{total:0,match:0,notMatch:0,matchDist:[],reasonDist:[],topReasons:[],totalPenaltyAmount:0,saveablePenaltyAmount:0};}const total=validationData.length;let match=0,notMatch=0;const reasonCounts={};validationData.forEach(row=>{if(row[\"Match/Not\"]===\"True\")match++;else if(row[\"Match/Not\"]===\"False\")notMatch++;if(row.stated_reason){const reason=row.stated_reason.trim();if(reason)reasonCounts[reason]=(reasonCounts[reason]||0)+1;}});const matchDist=[{name:\"Match\",value:match},{name:\"Not Match\",value:notMatch}];const reasonDist=Object.entries(reasonCounts).map(_ref5=>{let[name,value]=_ref5;return{name,value};});const filteredReasonDist=reasonDist.filter(r=>r.name.trim().toLowerCase()!==\"no reason\");const topReasons=filteredReasonDist.slice().sort((a,b)=>b.value-a.value).slice(0,5);// Calculate penalty metrics\nconst totalPenaltyAmount=(penaltyMetrics===null||penaltyMetrics===void 0?void 0:penaltyMetrics.total_penalty_claimed)||reasonsData.reduce((sum,row)=>{const penalty=parseFloat(row.penalty||0);return isNaN(penalty)?sum:sum+penalty;},0);const saveablePenaltyAmount=(penaltyMetrics===null||penaltyMetrics===void 0?void 0:penaltyMetrics.penalty_that_can_be_saved)||validationData.filter(vRow=>vRow[\"Match/Not\"]===\"False\").map(vRow=>{const reasonRow=reasonsData.find(r=>r.PO_ID===vRow.PO_ID&&r.reason&&vRow.stated_reason&&r.reason.trim().toLowerCase()===vRow.stated_reason.trim().toLowerCase());return reasonRow?parseFloat(reasonRow.penalty||0):0;}).reduce((sum,penalty)=>sum+(isNaN(penalty)?0:penalty),0);return{total,match,notMatch,matchDist,reasonDist,topReasons,totalPenaltyAmount,saveablePenaltyAmount};},[validationData,reasonsData,penaltyMetrics]);// PO options for filtering\nconst poOptions=React.useMemo(()=>{return validationData.map(row=>row.PO_ID);},[validationData]);const filteredRows=selectedPO?validationData.filter(row=>row.PO_ID===selectedPO):validationData;if(loading){return/*#__PURE__*/_jsxs(Box,{sx:{p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",align:\"center\",sx:{mb:4,fontWeight:700,color:'#00e6e6'},children:\"Discrepancy Validator\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:[1,2,3,4].map(i=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(KPICard,{isLoading:true})},i))})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(ChartCard,{isLoading:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(ChartCard,{isLoading:true})})]})]});}return/*#__PURE__*/_jsxs(Box,{sx:{p:3,background:'linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 100%)',minHeight:'100vh'},children:[/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center',mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{fontWeight:700,color:'#00e6e6',mb:1,background:'linear-gradient(45deg, #00e6e6, #1976d2)',backgroundClip:'text',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:\"Discrepancy Validator Dashboard\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{color:'#78909c',fontWeight:500},children:\"Real-time Purchase Order Validation & Analytics\"})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(KPICard,{title:\"Total Validations\",value:metrics.total,subtitle:\"Financial Transactions Analyzed\",icon:AssessmentIcon,color:\"#00e6e6\",trend:\"+12.5%\",isLoading:loading})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(KPICard,{title:\"Match Accuracy\",value:\"\".concat(metrics.total?(metrics.match/metrics.total*100).toFixed(1):0,\"%\"),subtitle:\"Validated PO to Invoice Alignment\",icon:CheckIcon,color:\"#4caf50\",trend:\"+2.3%\",isLoading:loading})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(KPICard,{title:\"Discrepancies Found\",value:metrics.notMatch,subtitle:\"Identified for Resolution\",icon:ErrorIcon,color:\"#ff5722\",isLoading:loading})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(KPICard,{title:\"Top Issue\",value:metrics.topReasons.length>0?metrics.topReasons[0].name.length>15?metrics.topReasons[0].name.substring(0,13)+'...':metrics.topReasons[0].name:'-',subtitle:metrics.topReasons.length>0?\"\".concat(metrics.topReasons[0].value,\" Occurrences\"):'No data',icon:ShowChartIcon,color:\"#9c27b0\",isLoading:loading})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(ChartCard,{title:\"Average Penalty by Reason\",isLoading:loading,actions:/*#__PURE__*/_jsx(Tooltip,{title:\"Refresh Data\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",sx:{color:'#78909c'},children:/*#__PURE__*/_jsx(RefreshIcon,{})})}),children:/*#__PURE__*/_jsx(Box,{sx:{height:350,display:'flex',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:metrics.topReasons.slice(0,5).map((r,index)=>{const penaltyAmounts=reasonsData.filter(item=>item.reason&&r.name&&item.reason.trim().toLowerCase()===r.name.trim().toLowerCase()).map(item=>parseFloat(item.penalty||0)).filter(p=>!isNaN(p));const avgPenalty=penaltyAmounts.length>0?penaltyAmounts.reduce((sum,p)=>sum+p,0)/penaltyAmounts.length:0;return{name:r.name.length>20?r.name.substring(0,18)+'...':r.name,value:parseFloat(avgPenalty.toFixed(2)),fullName:r.name,count:penaltyAmounts.length,total:penaltyAmounts.reduce((sum,p)=>sum+p,0)};}).filter(item=>item.value>0),cx:\"50%\",cy:\"50%\",outerRadius:120,innerRadius:60,paddingAngle:3,dataKey:\"value\",children:metrics.topReasons.slice(0,5).map((_,index)=>/*#__PURE__*/_jsx(Cell,{fill:COLORS[index%COLORS.length],stroke:\"rgba(255,255,255,0.1)\",strokeWidth:2},\"cell-\".concat(index)))}),/*#__PURE__*/_jsx(RechartsTooltip,{contentStyle:{backgroundColor:'rgba(35, 39, 51, 0.95)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'8px',color:'#e3eafc'},formatter:(value,name,props)=>[\"$\".concat(value.toLocaleString()),'Average Penalty'],labelFormatter:(_,payload)=>{var _payload$,_payload$$payload;return(payload===null||payload===void 0?void 0:(_payload$=payload[0])===null||_payload$===void 0?void 0:(_payload$$payload=_payload$.payload)===null||_payload$$payload===void 0?void 0:_payload$$payload.fullName)||'';}}),/*#__PURE__*/_jsx(Legend,{verticalAlign:\"bottom\",height:36,iconType:\"circle\",wrapperStyle:{color:'#e3eafc',fontSize:'14px',paddingTop:'20px'}})]})})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(ChartCard,{title:\"Top Discrepancy Drivers\",isLoading:loading,actions:/*#__PURE__*/_jsx(Tooltip,{title:\"Filter Data\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",sx:{color:'#78909c'},children:/*#__PURE__*/_jsx(FilterIcon,{})})}),children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:350,children:/*#__PURE__*/_jsxs(BarChart,{data:metrics.topReasons.map(r=>({name:r.name.length>20?r.name.substring(0,18)+'...':r.name,value:r.value,percentage:(r.value/metrics.total*100).toFixed(1),fullName:r.name})),layout:\"vertical\",margin:{left:30,right:30,top:20,bottom:20},children:[/*#__PURE__*/_jsx(XAxis,{type:\"number\",allowDecimals:false,axisLine:false,tickLine:false,tick:{fill:'#78909c',fontSize:12}}),/*#__PURE__*/_jsx(YAxis,{dataKey:\"name\",type:\"category\",axisLine:false,tickLine:false,tick:{fill:'#e3eafc',fontSize:13,fontWeight:500},width:150}),/*#__PURE__*/_jsx(Bar,{dataKey:\"value\",fill:\"url(#barGradient)\",barSize:30,radius:[0,6,6,0]}),/*#__PURE__*/_jsx(RechartsTooltip,{contentStyle:{backgroundColor:'rgba(35, 39, 51, 0.95)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'8px',color:'#e3eafc'},formatter:(value,name,props)=>[\"\".concat(value,\" occurrences (\").concat(props.payload.percentage,\"%)\"),'Frequency'],labelFormatter:(label,payload)=>{var _payload$2,_payload$2$payload;return(payload===null||payload===void 0?void 0:(_payload$2=payload[0])===null||_payload$2===void 0?void 0:(_payload$2$payload=_payload$2.payload)===null||_payload$2$payload===void 0?void 0:_payload$2$payload.fullName)||label;}}),/*#__PURE__*/_jsx(\"defs\",{children:/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"barGradient\",x1:\"0\",y1:\"0\",x2:\"1\",y2:\"0\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"0%\",stopColor:\"#1976d2\"}),/*#__PURE__*/_jsx(\"stop\",{offset:\"100%\",stopColor:\"#00e6e6\"})]})})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(ChartCard,{title:\"Validation Insights Overview\",isLoading:loading,children:/*#__PURE__*/_jsx(TableContainer,{component:Paper,sx:{backgroundColor:'transparent',boxShadow:'none',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'12px',maxHeight:300,'&::-webkit-scrollbar':{width:'8px'},'&::-webkit-scrollbar-track':{backgroundColor:'rgba(255, 255, 255, 0.1)',borderRadius:'4px'},'&::-webkit-scrollbar-thumb':{backgroundColor:'#00e6e6',borderRadius:'4px'}},children:/*#__PURE__*/_jsxs(Table,{size:\"small\",stickyHeader:true,children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsx(TableRow,{children:['Reason','Count','Accuracy','Avg Penalty','Total Impact'].map(header=>/*#__PURE__*/_jsx(TableCell,{sx:{backgroundColor:'rgba(35, 39, 51, 0.9)',color:'#00e6e6',fontWeight:700,fontSize:'0.9rem',borderBottom:'1px solid rgba(255, 255, 255, 0.1)',textTransform:'uppercase',letterSpacing:'0.5px'},children:header},header))})}),/*#__PURE__*/_jsx(TableBody,{children:metrics.topReasons.slice(0,8).map((r,index)=>{const matchCount=validationData.filter(row=>row.stated_reason&&row.stated_reason.trim().toLowerCase()===r.name.trim().toLowerCase()&&row[\"Match/Not\"]===\"True\").length;const notMatchCount=validationData.filter(row=>row.stated_reason&&row.stated_reason.trim().toLowerCase()===r.name.trim().toLowerCase()&&row[\"Match/Not\"]===\"False\").length;const totalCount=matchCount+notMatchCount;const matchRate=totalCount?matchCount/totalCount*100:0;const penaltyAmounts=reasonsData.filter(item=>item.reason&&r.name&&item.reason.trim().toLowerCase()===r.name.trim().toLowerCase()).map(item=>parseFloat(item.penalty||0)).filter(p=>!isNaN(p));const totalPenalty=penaltyAmounts.reduce((sum,p)=>sum+p,0);const avgPenalty=penaltyAmounts.length>0?totalPenalty/penaltyAmounts.length:0;return/*#__PURE__*/_jsxs(TableRow,{sx:{backgroundColor:index%2===0?'rgba(255, 255, 255, 0.02)':'transparent','&:hover':{backgroundColor:'rgba(0, 230, 230, 0.05)',transform:'scale(1.01)',transition:'all 0.2s ease'}},children:[/*#__PURE__*/_jsx(TableCell,{sx:{color:'#e3eafc',fontWeight:500,maxWidth:'200px',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:/*#__PURE__*/_jsx(Tooltip,{title:r.name,children:/*#__PURE__*/_jsx(\"span\",{children:r.name})})}),/*#__PURE__*/_jsx(TableCell,{sx:{color:'#b0bec5',textAlign:'center'},children:/*#__PURE__*/_jsx(Chip,{label:totalCount,size:\"small\",sx:{backgroundColor:alpha('#1976d2',0.2),color:'#1976d2',fontWeight:600}})}),/*#__PURE__*/_jsx(TableCell,{sx:{textAlign:'center'},children:/*#__PURE__*/_jsx(Chip,{label:\"\".concat(matchRate.toFixed(1),\"%\"),size:\"small\",sx:{backgroundColor:alpha(matchRate<70?'#f44336':matchRate<90?'#ff9800':'#4caf50',0.2),color:matchRate<70?'#f44336':matchRate<90?'#ff9800':'#4caf50',fontWeight:600}})}),/*#__PURE__*/_jsxs(TableCell,{sx:{color:'#b0bec5',textAlign:'right',fontWeight:500},children:[\"$\",avgPenalty.toFixed(2)]}),/*#__PURE__*/_jsxs(TableCell,{sx:{color:'#00e6e6',textAlign:'right',fontWeight:700,fontSize:'0.9rem'},children:[\"$\",totalPenalty.toLocaleString()]})]},r.name);})})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Card,{sx:{background:'linear-gradient(145deg, rgba(35, 39, 51, 0.8) 0%, rgba(25, 28, 36, 0.9) 100%)',backdropFilter:'blur(20px)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'16px',boxShadow:'0 8px 32px rgba(0, 0, 0, 0.37)'},children:[/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'rgba(255, 255, 255, 0.1)'},children:/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleTabChange,sx:{'& .MuiTab-root':{color:'#78909c',fontWeight:600,textTransform:'none',fontSize:'1rem','&.Mui-selected':{color:'#00e6e6'}},'& .MuiTabs-indicator':{backgroundColor:'#00e6e6',height:'3px',borderRadius:'2px'}},children:[/*#__PURE__*/_jsx(Tab,{label:\"Detailed Analysis\"}),/*#__PURE__*/_jsx(Tab,{label:\"Penalty Breakdown\"})]})}),/*#__PURE__*/_jsxs(CardContent,{sx:{p:3},children:[tabValue===0&&/*#__PURE__*/_jsx(Fade,{in:true,timeout:300,children:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,sx:{mb:3},children:[/*#__PURE__*/_jsx(InputLabel,{sx:{color:'#78909c'},id:\"po-select-label\",children:\"Filter by Purchase Order\"}),/*#__PURE__*/_jsxs(Select,{labelId:\"po-select-label\",value:selectedPO,label:\"Filter by Purchase Order\",onChange:e=>setSelectedPO(e.target.value),sx:{'& .MuiOutlinedInput-notchedOutline':{borderColor:'rgba(255, 255, 255, 0.2)'},'&:hover .MuiOutlinedInput-notchedOutline':{borderColor:'#00e6e6'},'&.Mui-focused .MuiOutlinedInput-notchedOutline':{borderColor:'#00e6e6'},'& .MuiSelect-select':{color:'#e3eafc'}},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"All Purchase Orders\"}),poOptions.map((po,index)=>/*#__PURE__*/_jsx(MenuItem,{value:po,children:po},index))]})]}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,sx:{backgroundColor:'transparent',boxShadow:'none',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'12px',maxHeight:400},children:/*#__PURE__*/_jsxs(Table,{size:\"small\",stickyHeader:true,children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsx(TableRow,{children:['PO ID','Reason','Status','Comments'].map(header=>/*#__PURE__*/_jsx(TableCell,{sx:{backgroundColor:'rgba(35, 39, 51, 0.9)',color:'#00e6e6',fontWeight:700,borderBottom:'1px solid rgba(255, 255, 255, 0.1)'},children:header},header))})}),/*#__PURE__*/_jsx(TableBody,{children:filteredRows.slice(0,50).map((row,idx)=>/*#__PURE__*/_jsxs(TableRow,{sx:{'&:hover':{backgroundColor:'rgba(0, 230, 230, 0.05)'}},children:[/*#__PURE__*/_jsx(TableCell,{sx:{color:'#e3eafc',fontWeight:500},children:row.PO_ID}),/*#__PURE__*/_jsx(TableCell,{sx:{color:'#b0bec5'},children:row.stated_reason}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:row[\"Match/Not\"]===\"True\"?\"Match\":\"No Match\",size:\"small\",sx:{backgroundColor:alpha(row[\"Match/Not\"]===\"True\"?'#4caf50':'#f44336',0.2),color:row[\"Match/Not\"]===\"True\"?'#4caf50':'#f44336',fontWeight:600}})}),/*#__PURE__*/_jsx(TableCell,{sx:{color:'#78909c',maxWidth:'300px',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:row.Comments||'-'})]},idx))})]})})]})}),tabValue===1&&/*#__PURE__*/_jsx(Fade,{in:true,timeout:300,children:/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(PenaltyTable,{validationData:validationData,reasonsData:reasonsData})})})]})]})})]})]});}export default ValidationKPIs;","map":{"version":3,"names":["React","useEffect","useState","Box","Grid","Typography","CircularProgress","FormControl","InputLabel","Select","MenuItem","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Card","CardContent","Tabs","Tab","Chip","IconButton","Tooltip","Skeleton","Fade","useTheme","alpha","LinearProgress","PieChart","Pie","Cell","RechartsTooltip","Legend","BarChart","Bar","XAxis","YAxis","ResponsiveContainer","LineChart","Line","CartesianGrid","ComposedChart","Area","AreaChart","AttachMoney","AttachMoneyIcon","ShowChart","ShowChartIcon","MonetizationOn","MonetizationOnIcon","Savings","SavingsIcon","TrendingUp","TrendingUpIcon","Assessment","AssessmentIcon","ErrorOutline","ErrorIcon","CheckCircleOutline","CheckIcon","FilterList","FilterIcon","Refresh","RefreshIcon","BACKEND_URL","PenaltyTable","jsx","_jsx","jsxs","_jsxs","COLORS","AnimatedCounter","_ref","value","duration","count","setCount","start","end","parseInt","timer","setInterval","Math","ceil","clearInterval","children","toLocaleString","KPICard","_ref2","title","subtitle","icon","Icon","color","trend","isLoading","theme","sx","background","backdropFilter","border","borderRadius","boxShadow","height","p","variant","width","mt","in","timeout","transition","position","overflow","transform","concat","content","top","left","right","display","alignItems","justifyContent","mb","fontWeight","fontSize","textTransform","letterSpacing","backgroundColor","lineHeight","replace","includes","size","label","ChartCard","_ref3","actions","gap","ValidationKPIs","_ref4","refresh","validationData","setValidationData","reasonsData","setReasonsData","penaltyMetrics","setPenaltyMetrics","loading","setLoading","selectedPO","setSelectedPO","tabValue","setTabValue","handleTabChange","event","newValue","parseCSV","csv","header","rows","trim","split","keys","map","row","values","v","obj","forEach","k","i","fetchData","validationRes","fetch","validationText","text","reasonsParsed","allPenaltiesRes","ok","allPenaltiesData","json","penalties","reasonsRes","reasonsText","error","console","validationParsed","reasonsWithNumberPenalty","_objectSpread","penalty","parseFloat","reason_normalized","reason","toLowerCase","enhancedValidationData","stated_reason_normalized","stated_reason","penaltyRes","method","headers","penaltyData","status","metrics","useMemo","length","total","match","notMatch","matchDist","reasonDist","topReasons","totalPenaltyAmount","saveablePenaltyAmount","reasonCounts","name","Object","entries","_ref5","filteredReasonDist","filter","r","slice","sort","a","b","total_penalty_claimed","reduce","sum","isNaN","penalty_that_can_be_saved","vRow","reasonRow","find","PO_ID","poOptions","filteredRows","align","container","spacing","item","xs","md","minHeight","textAlign","backgroundClip","WebkitBackgroundClip","WebkitTextFillColor","toFixed","substring","data","index","penaltyAmounts","avgPenalty","fullName","cx","cy","outerRadius","innerRadius","paddingAngle","dataKey","_","fill","stroke","strokeWidth","contentStyle","formatter","props","labelFormatter","payload","_payload$","_payload$$payload","verticalAlign","iconType","wrapperStyle","paddingTop","percentage","layout","margin","bottom","type","allowDecimals","axisLine","tickLine","tick","barSize","radius","_payload$2","_payload$2$payload","id","x1","y1","x2","y2","offset","stopColor","component","maxHeight","stickyHeader","borderBottom","matchCount","notMatchCount","totalCount","matchRate","totalPenalty","maxWidth","textOverflow","whiteSpace","borderColor","onChange","fullWidth","labelId","e","target","po","idx","Comments"],"sources":["D:/pipeline_v2/frontend/src/components/ValidationKPIs.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { \r\n  Box, \r\n  Grid, \r\n  Typography, \r\n  CircularProgress, \r\n  FormControl, \r\n  InputLabel, \r\n  Select, \r\n  MenuItem, \r\n  Paper, \r\n  Table, \r\n  TableBody, \r\n  TableCell, \r\n  TableContainer, \r\n  TableHead, \r\n  TableRow, \r\n  Card, \r\n  CardContent, \r\n  Tabs, \r\n  Tab, \r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Skeleton,\r\n  Fade,\r\n  useTheme,\r\n  alpha,\r\n  LinearProgress\r\n} from \"@mui/material\";\r\nimport { \r\n  PieChart, \r\n  Pie, \r\n  Cell, \r\n  Tooltip as RechartsTooltip, \r\n  Legend, \r\n  BarChart, \r\n  Bar, \r\n  XAxis, \r\n  YAxis, \r\n  ResponsiveContainer, \r\n  LineChart, \r\n  Line, \r\n  CartesianGrid, \r\n  ComposedChart,\r\n  Area,\r\n  AreaChart\r\n} from \"recharts\";\r\nimport { \r\n  AttachMoney as AttachMoneyIcon, \r\n  ShowChart as ShowChartIcon, \r\n  MonetizationOn as MonetizationOnIcon, \r\n  Savings as SavingsIcon,\r\n  TrendingUp as TrendingUpIcon,\r\n  Assessment as AssessmentIcon,\r\n  ErrorOutline as ErrorIcon,\r\n  CheckCircleOutline as CheckIcon,\r\n  FilterList as FilterIcon,\r\n  Refresh as RefreshIcon\r\n} from '@mui/icons-material';\r\nimport { BACKEND_URL } from \"../utils/backend\";\r\nimport PenaltyTable from \"./PenaltyTable\";\r\n\r\n\r\n\r\nconst COLORS = [\"#00e6e6\", \"#ff2e9a\", \"#00bcd4\", \"#1976d2\", \"#43a047\", \"#fbc02d\", \"#9c27b0\", \"#ff5722\"];\r\n\r\n// Custom animated counter component\r\nconst AnimatedCounter = ({ value, duration = 1000 }) => {\r\n  const [count, setCount] = useState(0);\r\n  \r\n  useEffect(() => {\r\n    let start = 0;\r\n    const end = parseInt(value);\r\n    if (start === end) return;\r\n    \r\n    const timer = setInterval(() => {\r\n      start += Math.ceil(end / (duration / 16));\r\n      if (start >= end) {\r\n        setCount(end);\r\n        clearInterval(timer);\r\n      } else {\r\n        setCount(start);\r\n      }\r\n    }, 16);\r\n    \r\n    return () => clearInterval(timer);\r\n  }, [value, duration]);\r\n  \r\n  return <span>{count.toLocaleString()}</span>;\r\n};\r\n\r\n// Enhanced KPI Card component\r\nconst KPICard = ({ title, value, subtitle, icon: Icon, color, trend, isLoading }) => {\r\n  const theme = useTheme();\r\n  \r\n  if (isLoading) {\r\n    return (\r\n      <Card sx={{ \r\n        background: 'linear-gradient(145deg, rgba(35, 39, 51, 0.8) 0%, rgba(25, 28, 36, 0.9) 100%)',\r\n        backdropFilter: 'blur(20px)',\r\n        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n        borderRadius: '16px',\r\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.37)',\r\n        height: '140px'\r\n      }}>\r\n        <CardContent sx={{ p: 3 }}>\r\n          <Skeleton variant=\"text\" width=\"60%\" height={20} />\r\n          <Skeleton variant=\"text\" width=\"40%\" height={40} sx={{ mt: 1 }} />\r\n          <Skeleton variant=\"text\" width=\"80%\" height={16} sx={{ mt: 1 }} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <Fade in timeout={500}>\r\n      <Card sx={{ \r\n        background: 'linear-gradient(145deg, rgba(35, 39, 51, 0.8) 0%, rgba(25, 28, 36, 0.9) 100%)',\r\n        backdropFilter: 'blur(20px)',\r\n        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n        borderRadius: '16px',\r\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.37)',\r\n        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n        height: '140px',\r\n        position: 'relative',\r\n        overflow: 'hidden',\r\n        '&:hover': {\r\n          transform: 'translateY(-4px)',\r\n          boxShadow: '0 20px 40px rgba(0, 0, 0, 0.4)',\r\n          border: `1px solid ${alpha(color, 0.5)}`,\r\n        },\r\n        '&::before': {\r\n          content: '\"\"',\r\n          position: 'absolute',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          height: '3px',\r\n          background: `linear-gradient(90deg, ${color}, ${alpha(color, 0.6)})`,\r\n        }\r\n      }}>\r\n        <CardContent sx={{ p: 3, position: 'relative' }}>\r\n          <Box sx={{ display: 'flex', alignItems: 'flex-start', justifyContent: 'space-between', mb: 2 }}>\r\n            <Typography \r\n              variant=\"subtitle2\" \r\n              sx={{ \r\n                color: '#b0bec5',\r\n                fontWeight: 600,\r\n                fontSize: '0.85rem',\r\n                textTransform: 'uppercase',\r\n                letterSpacing: '0.5px'\r\n              }}\r\n            >\r\n              {title}\r\n            </Typography>\r\n            <Box sx={{ \r\n              backgroundColor: alpha(color, 0.15),\r\n              borderRadius: '12px',\r\n              p: 1,\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center'\r\n            }}>\r\n              <Icon sx={{ color, fontSize: 20 }} />\r\n            </Box>\r\n          </Box>\r\n          \r\n          <Typography \r\n            variant=\"h4\" \r\n            sx={{ \r\n              color: color,\r\n              fontWeight: 700,\r\n              fontSize: '2rem',\r\n              lineHeight: 1.2,\r\n              mb: 1\r\n            }}\r\n          >\r\n            <AnimatedCounter value={typeof value === 'string' ? value.replace(/[^0-9.]/g, '') : value} />\r\n            {typeof value === 'string' && value.includes('%') && '%'}\r\n          </Typography>\r\n          \r\n          <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n            <Typography \r\n              variant=\"body2\" \r\n              sx={{ \r\n                color: '#78909c',\r\n                fontSize: '0.75rem',\r\n                lineHeight: 1.3\r\n              }}\r\n            >\r\n              {subtitle}\r\n            </Typography>\r\n            {trend && (\r\n              <Chip \r\n                size=\"small\"\r\n                icon={<TrendingUpIcon sx={{ fontSize: 14 }} />}\r\n                label={trend}\r\n                sx={{\r\n                  backgroundColor: alpha('#4caf50', 0.15),\r\n                  color: '#4caf50',\r\n                  fontSize: '0.7rem',\r\n                  height: 20,\r\n                  '& .MuiChip-icon': { color: '#4caf50', fontSize: 12 }\r\n                }}\r\n              />\r\n            )}\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n    </Fade>\r\n  );\r\n};\r\n\r\n// Enhanced Chart Card component\r\nconst ChartCard = ({ title, children, isLoading, actions }) => {\r\n  if (isLoading) {\r\n    return (\r\n      <Card sx={{ \r\n        background: 'linear-gradient(145deg, rgba(35, 39, 51, 0.8) 0%, rgba(25, 28, 36, 0.9) 100%)',\r\n        backdropFilter: 'blur(20px)',\r\n        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n        borderRadius: '16px',\r\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.37)',\r\n        height: '420px'\r\n      }}>\r\n        <CardContent sx={{ p: 3 }}>\r\n          <Skeleton variant=\"text\" width=\"60%\" height={28} />\r\n          <Skeleton variant=\"rectangular\" width=\"100%\" height={350} sx={{ mt: 2, borderRadius: 2 }} />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <Fade in timeout={700}>\r\n      <Card sx={{ \r\n        background: 'linear-gradient(145deg, rgba(35, 39, 51, 0.8) 0%, rgba(25, 28, 36, 0.9) 100%)',\r\n        backdropFilter: 'blur(20px)',\r\n        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n        borderRadius: '16px',\r\n        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.37)',\r\n        transition: 'all 0.3s ease',\r\n        '&:hover': {\r\n          boxShadow: '0 12px 40px rgba(0, 0, 0, 0.5)',\r\n        }\r\n      }}>\r\n        <CardContent sx={{ p: 3 }}>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 3 }}>\r\n            <Typography \r\n              variant=\"h6\" \r\n              sx={{ \r\n                color: '#00e6e6',\r\n                fontWeight: 600,\r\n                fontSize: '1.25rem'\r\n              }}\r\n            >\r\n              {title}\r\n            </Typography>\r\n            {actions && (\r\n              <Box sx={{ display: 'flex', gap: 1 }}>\r\n                {actions}\r\n              </Box>\r\n            )}\r\n          </Box>\r\n          {children}\r\n        </CardContent>\r\n      </Card>\r\n    </Fade>\r\n  );\r\n};\r\n\r\nfunction ValidationKPIs({ refresh }) {\r\n  const [validationData, setValidationData] = useState([]);\r\n  const [reasonsData, setReasonsData] = useState([]);\r\n  const [penaltyMetrics, setPenaltyMetrics] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedPO, setSelectedPO] = useState(\"\");\r\n  const [tabValue, setTabValue] = useState(0);\r\n  const theme = useTheme();\r\n\r\n  const handleTabChange = (event, newValue) => {\r\n    setTabValue(newValue);\r\n  };\r\n\r\n  // Helper function to parse CSV\r\n  const parseCSV = (csv) => {\r\n    const [header, ...rows] = csv.trim().split(/\\r?\\n/);\r\n    const keys = header.split(\",\");\r\n    return rows.map(row => {\r\n      const values = row.split(/,(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/).map(v => v.replace(/^\"|\"$/g, \"\"));\r\n      const obj = {};\r\n      keys.forEach((k, i) => obj[k] = values[i]);\r\n      return obj;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      setLoading(true);\r\n      try {\r\n        // Fetch validation results\r\n        const validationRes = await fetch(`${BACKEND_URL}/results/final_reason_validation_results.csv`);\r\n        const validationText = await validationRes.text();\r\n        \r\n        // Try to fetch from the new endpoint first\r\n        let reasonsParsed = [];\r\n        try {\r\n          const allPenaltiesRes = await fetch(`${BACKEND_URL}/all-penalties`);\r\n          if (allPenaltiesRes.ok) {\r\n            const allPenaltiesData = await allPenaltiesRes.json();\r\n            reasonsParsed = allPenaltiesData.penalties;\r\n          } else {\r\n            // Fallback to direct CSV file\r\n            const reasonsRes = await fetch(`${BACKEND_URL}/results/reasons.csv`);\r\n            const reasonsText = await reasonsRes.text();\r\n            reasonsParsed = parseCSV(reasonsText);\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error fetching penalties:\", error);\r\n          const reasonsRes = await fetch(`${BACKEND_URL}/results/reasons.csv`);\r\n          const reasonsText = await reasonsRes.text();\r\n          reasonsParsed = parseCSV(reasonsText);\r\n        }\r\n        \r\n        // Parse validation data\r\n        const validationParsed = parseCSV(validationText);\r\n        \r\n        // Make sure penalty values are treated as numbers\r\n        const reasonsWithNumberPenalty = reasonsParsed.map(row => ({\r\n          ...row,\r\n          penalty: row.penalty ? parseFloat(row.penalty) : 0,\r\n          reason_normalized: row.reason ? row.reason.trim().toLowerCase() : ''\r\n        }));\r\n        \r\n        // Enhance validation data with normalized stated_reason\r\n        const enhancedValidationData = validationParsed.map(row => ({\r\n          ...row,\r\n          stated_reason_normalized: row.stated_reason ? row.stated_reason.trim().toLowerCase() : ''\r\n        }));\r\n        \r\n        setValidationData(enhancedValidationData);\r\n        setReasonsData(reasonsWithNumberPenalty);\r\n        \r\n        // Fetch penalty metrics\r\n        const penaltyRes = await fetch(`${BACKEND_URL}/calculate-penalties`, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' }\r\n        });\r\n        const penaltyData = await penaltyRes.json();\r\n        \r\n        if (penaltyData.status === 'success') {\r\n          setPenaltyMetrics(penaltyData.metrics);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchData();\r\n  }, [refresh]);\r\n\r\n  // Calculate metrics only after data is loaded\r\n  const metrics = React.useMemo(() => {\r\n    if (!validationData.length) {\r\n      return {\r\n        total: 0,\r\n        match: 0,\r\n        notMatch: 0,\r\n        matchDist: [],\r\n        reasonDist: [],\r\n        topReasons: [],\r\n        totalPenaltyAmount: 0,\r\n        saveablePenaltyAmount: 0\r\n      };\r\n    }\r\n\r\n    const total = validationData.length;\r\n    let match = 0, notMatch = 0;\r\n    const reasonCounts = {};\r\n    \r\n    validationData.forEach((row) => {\r\n      if (row[\"Match/Not\"] === \"True\") match++;\r\n      else if (row[\"Match/Not\"] === \"False\") notMatch++;\r\n      if (row.stated_reason) {\r\n        const reason = row.stated_reason.trim();\r\n        if (reason) reasonCounts[reason] = (reasonCounts[reason] || 0) + 1;\r\n      }\r\n    });\r\n    \r\n    const matchDist = [\r\n      { name: \"Match\", value: match },\r\n      { name: \"Not Match\", value: notMatch },\r\n    ];\r\n    \r\n    const reasonDist = Object.entries(reasonCounts).map(([name, value]) => ({ name, value }));\r\n    const filteredReasonDist = reasonDist.filter(r => r.name.trim().toLowerCase() !== \"no reason\");\r\n    const topReasons = filteredReasonDist.slice().sort((a, b) => b.value - a.value).slice(0, 5);\r\n    \r\n    // Calculate penalty metrics\r\n    const totalPenaltyAmount = penaltyMetrics?.total_penalty_claimed || \r\n      reasonsData.reduce((sum, row) => {\r\n        const penalty = parseFloat(row.penalty || 0);\r\n        return isNaN(penalty) ? sum : sum + penalty;\r\n      }, 0);\r\n      \r\n    const saveablePenaltyAmount = penaltyMetrics?.penalty_that_can_be_saved ||\r\n      validationData\r\n        .filter(vRow => vRow[\"Match/Not\"] === \"False\")\r\n        .map(vRow => {\r\n          const reasonRow = reasonsData.find(\r\n            r => r.PO_ID === vRow.PO_ID && \r\n                 r.reason && vRow.stated_reason &&\r\n                 r.reason.trim().toLowerCase() === vRow.stated_reason.trim().toLowerCase()\r\n          );\r\n          return reasonRow ? parseFloat(reasonRow.penalty || 0) : 0;\r\n        })\r\n        .reduce((sum, penalty) => sum + (isNaN(penalty) ? 0 : penalty), 0);\r\n\r\n    return {\r\n      total,\r\n      match,\r\n      notMatch,\r\n      matchDist,\r\n      reasonDist,\r\n      topReasons,\r\n      totalPenaltyAmount,\r\n      saveablePenaltyAmount\r\n    };\r\n  }, [validationData, reasonsData, penaltyMetrics]);\r\n\r\n  // PO options for filtering\r\n  const poOptions = React.useMemo(() => {\r\n    return validationData.map(row => row.PO_ID);\r\n  }, [validationData]);\r\n\r\n  const filteredRows = selectedPO\r\n    ? validationData.filter(row => row.PO_ID === selectedPO)\r\n    : validationData;\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box sx={{ p: 3 }}>\r\n        <Typography variant=\"h5\" align=\"center\" sx={{ mb: 4, fontWeight: 700, color: '#00e6e6' }}>\r\n          Discrepancy Validator\r\n        </Typography>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12}>\r\n            <Grid container spacing={3}>\r\n              {[1, 2, 3, 4].map((i) => (\r\n                <Grid item xs={12} md={3} key={i}>\r\n                  <KPICard isLoading />\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <ChartCard isLoading />\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <ChartCard isLoading />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ \r\n      p: 3,\r\n      background: 'linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 100%)',\r\n      minHeight: '100vh'\r\n    }}>\r\n      {/* Header */}\r\n      <Box sx={{ textAlign: 'center', mb: 4 }}>\r\n        <Typography \r\n          variant=\"h4\" \r\n          sx={{ \r\n            fontWeight: 700, \r\n            color: '#00e6e6',\r\n            mb: 1,\r\n            background: 'linear-gradient(45deg, #00e6e6, #1976d2)',\r\n            backgroundClip: 'text',\r\n            WebkitBackgroundClip: 'text',\r\n            WebkitTextFillColor: 'transparent'\r\n          }}\r\n        >\r\n          Discrepancy Validator Dashboard\r\n        </Typography>\r\n        <Typography variant=\"subtitle1\" sx={{ color: '#78909c', fontWeight: 500 }}>\r\n          Real-time Purchase Order Validation & Analytics\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Grid container spacing={3}>\r\n        {/* KPI Cards */}\r\n        <Grid item xs={12}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12} md={3}>\r\n              <KPICard\r\n                title=\"Total Validations\"\r\n                value={metrics.total}\r\n                subtitle=\"Financial Transactions Analyzed\"\r\n                icon={AssessmentIcon}\r\n                color=\"#00e6e6\"\r\n                trend=\"+12.5%\"\r\n                isLoading={loading}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} md={3}>\r\n              <KPICard\r\n                title=\"Match Accuracy\"\r\n                value={`${metrics.total ? ((metrics.match / metrics.total) * 100).toFixed(1) : 0}%`}\r\n                subtitle=\"Validated PO to Invoice Alignment\"\r\n                icon={CheckIcon}\r\n                color=\"#4caf50\"\r\n                trend=\"+2.3%\"\r\n                isLoading={loading}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} md={3}>\r\n              <KPICard\r\n                title=\"Discrepancies Found\"\r\n                value={metrics.notMatch}\r\n                subtitle=\"Identified for Resolution\"\r\n                icon={ErrorIcon}\r\n                color=\"#ff5722\"\r\n                isLoading={loading}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} md={3}>\r\n              <KPICard\r\n                title=\"Top Issue\"\r\n                value={metrics.topReasons.length > 0 ? \r\n                  (metrics.topReasons[0].name.length > 15 \r\n                    ? metrics.topReasons[0].name.substring(0, 13) + '...' \r\n                    : metrics.topReasons[0].name) : '-'}\r\n                subtitle={metrics.topReasons.length > 0 ? `${metrics.topReasons[0].value} Occurrences` : 'No data'}\r\n                icon={ShowChartIcon}\r\n                color=\"#9c27b0\"\r\n                isLoading={loading}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        \r\n        {/* Charts Row */}\r\n        <Grid item xs={12} md={6}>\r\n          <ChartCard\r\n            title=\"Average Penalty by Reason\"\r\n            isLoading={loading}\r\n            actions={\r\n              <Tooltip title=\"Refresh Data\">\r\n                <IconButton size=\"small\" sx={{ color: '#78909c' }}>\r\n                  <RefreshIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            }\r\n          >\r\n            <Box sx={{ height: 350, display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <PieChart>\r\n                  <Pie\r\n                    data={metrics.topReasons.slice(0, 5).map((r, index) => {\r\n                      const penaltyAmounts = reasonsData\r\n                        .filter(item => \r\n                          item.reason && r.name && \r\n                          item.reason.trim().toLowerCase() === r.name.trim().toLowerCase()\r\n                        )\r\n                        .map(item => parseFloat(item.penalty || 0))\r\n                        .filter(p => !isNaN(p));\r\n                      \r\n                      const avgPenalty = penaltyAmounts.length > 0 \r\n                        ? penaltyAmounts.reduce((sum, p) => sum + p, 0) / penaltyAmounts.length \r\n                        : 0;\r\n                      \r\n                      return {\r\n                        name: r.name.length > 20 ? r.name.substring(0, 18) + '...' : r.name,\r\n                        value: parseFloat(avgPenalty.toFixed(2)),\r\n                        fullName: r.name,\r\n                        count: penaltyAmounts.length,\r\n                        total: penaltyAmounts.reduce((sum, p) => sum + p, 0)\r\n                      };\r\n                    }).filter(item => item.value > 0)}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    outerRadius={120}\r\n                    innerRadius={60}\r\n                    paddingAngle={3}\r\n                    dataKey=\"value\"\r\n                  >\r\n                    {metrics.topReasons.slice(0, 5).map((_, index) => (\r\n                      <Cell \r\n                        key={`cell-${index}`} \r\n                        fill={COLORS[index % COLORS.length]}\r\n                        stroke=\"rgba(255,255,255,0.1)\"\r\n                        strokeWidth={2}\r\n                      />\r\n                    ))}\r\n                  </Pie>\r\n                  <RechartsTooltip\r\n                    contentStyle={{\r\n                      backgroundColor: 'rgba(35, 39, 51, 0.95)',\r\n                      border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                      borderRadius: '8px',\r\n                      color: '#e3eafc'\r\n                    }}\r\n                    formatter={(value, name, props) => [\r\n                      `$${value.toLocaleString()}`, \r\n                      'Average Penalty'\r\n                    ]}\r\n                    labelFormatter={(_, payload) => payload?.[0]?.payload?.fullName || ''}\r\n                  />\r\n                  <Legend \r\n                    verticalAlign=\"bottom\"\r\n                    height={36}\r\n                    iconType=\"circle\"\r\n                    wrapperStyle={{ \r\n                      color: '#e3eafc', \r\n                      fontSize: '14px',\r\n                      paddingTop: '20px'\r\n                    }}\r\n                  />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            </Box>\r\n          </ChartCard>\r\n        </Grid>\r\n        \r\n        <Grid item xs={12} md={6}>\r\n          <ChartCard\r\n            title=\"Top Discrepancy Drivers\"\r\n            isLoading={loading}\r\n            actions={\r\n              <Tooltip title=\"Filter Data\">\r\n                <IconButton size=\"small\" sx={{ color: '#78909c' }}>\r\n                  <FilterIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            }\r\n          >\r\n            <ResponsiveContainer width=\"100%\" height={350}>\r\n              <BarChart \r\n                data={metrics.topReasons.map(r => ({\r\n                  name: r.name.length > 20 ? r.name.substring(0, 18) + '...' : r.name,\r\n                  value: r.value,\r\n                  percentage: ((r.value / metrics.total) * 100).toFixed(1),\r\n                  fullName: r.name\r\n                }))} \r\n                layout=\"vertical\" \r\n                margin={{ left: 30, right: 30, top: 20, bottom: 20 }}\r\n              >\r\n                <XAxis \r\n                  type=\"number\" \r\n                  allowDecimals={false}\r\n                  axisLine={false}\r\n                  tickLine={false}\r\n                  tick={{ fill: '#78909c', fontSize: 12 }}\r\n                />\r\n                <YAxis \r\n                  dataKey=\"name\" \r\n                  type=\"category\" \r\n                  axisLine={false}\r\n                  tickLine={false}\r\n                  tick={{ fill: '#e3eafc', fontSize: 13, fontWeight: 500 }} \r\n                  width={150}\r\n                />\r\n                <Bar \r\n                  dataKey=\"value\" \r\n                  fill=\"url(#barGradient)\"\r\n                  barSize={30}\r\n                  radius={[0, 6, 6, 0]}\r\n                />\r\n                <RechartsTooltip\r\n                  contentStyle={{\r\n                    backgroundColor: 'rgba(35, 39, 51, 0.95)',\r\n                    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                    borderRadius: '8px',\r\n                    color: '#e3eafc'\r\n                  }}\r\n                  formatter={(value, name, props) => [\r\n                    `${value} occurrences (${props.payload.percentage}%)`, \r\n                    'Frequency'\r\n                  ]}\r\n                  labelFormatter={(label, payload) => payload?.[0]?.payload?.fullName || label}\r\n                />\r\n                <defs>\r\n                  <linearGradient id=\"barGradient\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"0\">\r\n                    <stop offset=\"0%\" stopColor=\"#1976d2\" />\r\n                    <stop offset=\"100%\" stopColor=\"#00e6e6\" />\r\n                  </linearGradient>\r\n                </defs>\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </ChartCard>\r\n        </Grid>\r\n        \r\n        {/* Enhanced Table */}\r\n        <Grid item xs={12}>\r\n          <ChartCard\r\n            title=\"Validation Insights Overview\"\r\n            isLoading={loading}\r\n          >\r\n            <TableContainer \r\n              component={Paper} \r\n              sx={{ \r\n                backgroundColor: 'transparent',\r\n                boxShadow: 'none',\r\n                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                borderRadius: '12px',\r\n                maxHeight: 300,\r\n                '&::-webkit-scrollbar': {\r\n                  width: '8px',\r\n                },\r\n                '&::-webkit-scrollbar-track': {\r\n                  backgroundColor: 'rgba(255, 255, 255, 0.1)',\r\n                  borderRadius: '4px',\r\n                },\r\n                '&::-webkit-scrollbar-thumb': {\r\n                  backgroundColor: '#00e6e6',\r\n                  borderRadius: '4px',\r\n                },\r\n              }}\r\n            >\r\n              <Table size=\"small\" stickyHeader>\r\n                <TableHead>\r\n                  <TableRow>\r\n                    {['Reason', 'Count', 'Accuracy', 'Avg Penalty', 'Total Impact'].map((header) => (\r\n                      <TableCell \r\n                        key={header}\r\n                        sx={{ \r\n                          backgroundColor: 'rgba(35, 39, 51, 0.9)',\r\n                          color: '#00e6e6',\r\n                          fontWeight: 700,\r\n                          fontSize: '0.9rem',\r\n                          borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n                          textTransform: 'uppercase',\r\n                          letterSpacing: '0.5px'\r\n                        }}\r\n                      >\r\n                        {header}\r\n                      </TableCell>\r\n                    ))}\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {metrics.topReasons.slice(0, 8).map((r, index) => {\r\n                    const matchCount = validationData.filter(row => \r\n                      row.stated_reason && \r\n                      row.stated_reason.trim().toLowerCase() === r.name.trim().toLowerCase() && \r\n                      row[\"Match/Not\"] === \"True\"\r\n                    ).length;\r\n                    \r\n                    const notMatchCount = validationData.filter(row => \r\n                      row.stated_reason && \r\n                      row.stated_reason.trim().toLowerCase() === r.name.trim().toLowerCase() && \r\n                      row[\"Match/Not\"] === \"False\"\r\n                    ).length;\r\n                    \r\n                    const totalCount = matchCount + notMatchCount;\r\n                    const matchRate = totalCount ? (matchCount / totalCount) * 100 : 0;\r\n                    \r\n                    const penaltyAmounts = reasonsData\r\n                      .filter(item => \r\n                        item.reason && r.name && \r\n                        item.reason.trim().toLowerCase() === r.name.trim().toLowerCase()\r\n                      )\r\n                      .map(item => parseFloat(item.penalty || 0))\r\n                      .filter(p => !isNaN(p));\r\n                    \r\n                    const totalPenalty = penaltyAmounts.reduce((sum, p) => sum + p, 0);\r\n                    const avgPenalty = penaltyAmounts.length > 0 ? totalPenalty / penaltyAmounts.length : 0;\r\n                    \r\n                    return (\r\n                      <TableRow \r\n                        key={r.name} \r\n                        sx={{ \r\n                          backgroundColor: index % 2 === 0 ? 'rgba(255, 255, 255, 0.02)' : 'transparent',\r\n                          '&:hover': { \r\n                            backgroundColor: 'rgba(0, 230, 230, 0.05)',\r\n                            transform: 'scale(1.01)',\r\n                            transition: 'all 0.2s ease'\r\n                          }\r\n                        }}\r\n                      >\r\n                        <TableCell sx={{ \r\n                          color: '#e3eafc', \r\n                          fontWeight: 500,\r\n                          maxWidth: '200px',\r\n                          overflow: 'hidden',\r\n                          textOverflow: 'ellipsis',\r\n                          whiteSpace: 'nowrap'\r\n                        }}>\r\n                          <Tooltip title={r.name}>\r\n                            <span>{r.name}</span>\r\n                          </Tooltip>\r\n                        </TableCell>\r\n                        <TableCell sx={{ color: '#b0bec5', textAlign: 'center' }}>\r\n                          <Chip \r\n                            label={totalCount}\r\n                            size=\"small\"\r\n                            sx={{ \r\n                              backgroundColor: alpha('#1976d2', 0.2),\r\n                              color: '#1976d2',\r\n                              fontWeight: 600\r\n                            }}\r\n                          />\r\n                        </TableCell>\r\n                        <TableCell sx={{ textAlign: 'center' }}>\r\n                          <Chip \r\n                            label={`${matchRate.toFixed(1)}%`}\r\n                            size=\"small\"\r\n                            sx={{ \r\n                              backgroundColor: alpha(\r\n                                matchRate < 70 ? '#f44336' : matchRate < 90 ? '#ff9800' : '#4caf50', \r\n                                0.2\r\n                              ),\r\n                              color: matchRate < 70 ? '#f44336' : matchRate < 90 ? '#ff9800' : '#4caf50',\r\n                              fontWeight: 600\r\n                            }}\r\n                          />\r\n                        </TableCell>\r\n                        <TableCell sx={{ color: '#b0bec5', textAlign: 'right', fontWeight: 500 }}>\r\n                          ${avgPenalty.toFixed(2)}\r\n                        </TableCell>\r\n                        <TableCell sx={{ \r\n                          color: '#00e6e6', \r\n                          textAlign: 'right', \r\n                          fontWeight: 700,\r\n                          fontSize: '0.9rem'\r\n                        }}>\r\n                          ${totalPenalty.toLocaleString()}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </ChartCard>\r\n        </Grid>\r\n        \r\n        {/* Enhanced Tabs Section */}\r\n        <Grid item xs={12}>\r\n          <Card sx={{ \r\n            background: 'linear-gradient(145deg, rgba(35, 39, 51, 0.8) 0%, rgba(25, 28, 36, 0.9) 100%)',\r\n            backdropFilter: 'blur(20px)',\r\n            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n            borderRadius: '16px',\r\n            boxShadow: '0 8px 32px rgba(0, 0, 0, 0.37)'\r\n          }}>\r\n            <Box sx={{ borderBottom: 1, borderColor: 'rgba(255, 255, 255, 0.1)' }}>\r\n              <Tabs \r\n                value={tabValue} \r\n                onChange={handleTabChange}\r\n                sx={{\r\n                  '& .MuiTab-root': {\r\n                    color: '#78909c',\r\n                    fontWeight: 600,\r\n                    textTransform: 'none',\r\n                    fontSize: '1rem',\r\n                    '&.Mui-selected': {\r\n                      color: '#00e6e6'\r\n                    }\r\n                  },\r\n                  '& .MuiTabs-indicator': {\r\n                    backgroundColor: '#00e6e6',\r\n                    height: '3px',\r\n                    borderRadius: '2px'\r\n                  }\r\n                }}\r\n              >\r\n                <Tab label=\"Detailed Analysis\" />\r\n                <Tab label=\"Penalty Breakdown\" />\r\n              </Tabs>\r\n            </Box>\r\n            \r\n            <CardContent sx={{ p: 3 }}>\r\n              {tabValue === 0 && (\r\n                <Fade in timeout={300}>\r\n                  <Box>\r\n                    <FormControl fullWidth sx={{ mb: 3 }}>\r\n                      <InputLabel \r\n                        sx={{ color: '#78909c' }}\r\n                        id=\"po-select-label\"\r\n                      >\r\n                        Filter by Purchase Order\r\n                      </InputLabel>\r\n                      <Select\r\n                        labelId=\"po-select-label\"\r\n                        value={selectedPO}\r\n                        label=\"Filter by Purchase Order\"\r\n                        onChange={e => setSelectedPO(e.target.value)}\r\n                        sx={{\r\n                          '& .MuiOutlinedInput-notchedOutline': {\r\n                            borderColor: 'rgba(255, 255, 255, 0.2)'\r\n                          },\r\n                          '&:hover .MuiOutlinedInput-notchedOutline': {\r\n                            borderColor: '#00e6e6'\r\n                          },\r\n                          '&.Mui-focused .MuiOutlinedInput-notchedOutline': {\r\n                            borderColor: '#00e6e6'\r\n                          },\r\n                          '& .MuiSelect-select': {\r\n                            color: '#e3eafc'\r\n                          }\r\n                        }}\r\n                      >\r\n                        <MenuItem value=\"\">All Purchase Orders</MenuItem>\r\n                        {poOptions.map((po, index) => (\r\n                          <MenuItem key={index} value={po}>{po}</MenuItem>\r\n                        ))}\r\n                      </Select>\r\n                    </FormControl>\r\n                    \r\n                    <TableContainer \r\n                      component={Paper}\r\n                      sx={{ \r\n                        backgroundColor: 'transparent',\r\n                        boxShadow: 'none',\r\n                        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                        borderRadius: '12px',\r\n                        maxHeight: 400\r\n                      }}\r\n                    >\r\n                      <Table size=\"small\" stickyHeader>\r\n                        <TableHead>\r\n                          <TableRow>\r\n                            {['PO ID', 'Reason', 'Status', 'Comments'].map((header) => (\r\n                              <TableCell \r\n                                key={header}\r\n                                sx={{ \r\n                                  backgroundColor: 'rgba(35, 39, 51, 0.9)',\r\n                                  color: '#00e6e6',\r\n                                  fontWeight: 700,\r\n                                  borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\r\n                                }}\r\n                              >\r\n                                {header}\r\n                              </TableCell>\r\n                            ))}\r\n                          </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                          {filteredRows.slice(0, 50).map((row, idx) => (\r\n                            <TableRow \r\n                              key={idx}\r\n                              sx={{ \r\n                                '&:hover': { \r\n                                  backgroundColor: 'rgba(0, 230, 230, 0.05)' \r\n                                }\r\n                              }}\r\n                            >\r\n                              <TableCell sx={{ color: '#e3eafc', fontWeight: 500 }}>\r\n                                {row.PO_ID}\r\n                              </TableCell>\r\n                              <TableCell sx={{ color: '#b0bec5' }}>\r\n                                {row.stated_reason}\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <Chip \r\n                                  label={row[\"Match/Not\"] === \"True\" ? \"Match\" : \"No Match\"}\r\n                                  size=\"small\"\r\n                                  sx={{ \r\n                                    backgroundColor: alpha(\r\n                                      row[\"Match/Not\"] === \"True\" ? '#4caf50' : '#f44336', \r\n                                      0.2\r\n                                    ),\r\n                                    color: row[\"Match/Not\"] === \"True\" ? '#4caf50' : '#f44336',\r\n                                    fontWeight: 600\r\n                                  }}\r\n                                />\r\n                              </TableCell>\r\n                              <TableCell sx={{ \r\n                                color: '#78909c',\r\n                                maxWidth: '300px',\r\n                                overflow: 'hidden',\r\n                                textOverflow: 'ellipsis',\r\n                                whiteSpace: 'nowrap'\r\n                              }}>\r\n                                {row.Comments || '-'}\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          ))}\r\n                        </TableBody>\r\n                      </Table>\r\n                    </TableContainer>\r\n                  </Box>\r\n                </Fade>\r\n              )}\r\n              \r\n              {tabValue === 1 && (\r\n                <Fade in timeout={300}>\r\n                  <Box>\r\n                    <PenaltyTable validationData={validationData} reasonsData={reasonsData} />\r\n                  </Box>\r\n                </Fade>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default ValidationKPIs;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}